document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-reign-news-widget").forEach((e=>{const t=JSON.parse(e.getAttribute("data-attributes"));!function(e,{title:t,postsPerPage:n,postCategory:o,showAuthor:a}){const d="/wp-json/wp/v2/posts?_embed&per_page="+n;let s="";o.length>0&&""!==o[0]&&"all"!==o[0]&&(s="&categories="+o.join(",")),fetch(d+s).then((e=>e.json())).then((n=>function(e,t,{title:n,showAuthor:o}){if(e.innerHTML="",n){const t=document.createElement("h2");t.className="wp-block-heading",t.textContent=n,e.appendChild(t)}if(0===t.length)return void(e.innerHTML="<p>No posts found</p>");const a=document.createElement("ul");a.className="latest-posts-list",t.forEach((e=>{const t=document.createElement("li");if(t.className="latest-post-item",e._embedded&&e._embedded["wp:featuredmedia"]){const n=document.createElement("div");n.className="latest-post-thumb";const o=document.createElement("img");o.src=e._embedded["wp:featuredmedia"][0].source_url,o.alt=e.title.rendered,n.appendChild(o),t.appendChild(n)}const n=document.createElement("div");n.className="latest-post-content";const d=document.createElement("h4");if(d.className="post-title",d.innerHTML=e.title.rendered,n.appendChild(d),o&&e._embedded.author){const t=document.createElement("p");t.className="post-author",t.innerHTML=`By ${e._embedded.author[0].name}`,n.appendChild(t)}const s=document.createElement("p");s.className="latest-posts-date",s.textContent=new Date(e.date).toLocaleDateString(),n.appendChild(s),t.appendChild(n),a.appendChild(t)})),e.appendChild(a)}(e,n,{title:t,showAuthor:a}))).catch((t=>{console.error("Error fetching posts:",t),e.innerHTML="<p>Error loading posts</p>"}))}(e,t)}))}));